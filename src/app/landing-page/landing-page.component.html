<!-- Navbar Container -->
<div class="navbar-container">

    <header class="navbar">
        <div class="logo-container">
            <img
                *ngIf="brandLogoUrl"
                [src]="brandLogoUrl"
                alt="Logo"
                class="logo-img" />

            <div class="logo">
                <span>{{ brandDetails?.brandName || 'textexpert' }}</span>
            </div>
        </div>

        <ul class="nav-links" id="navLinks" *ngIf="!isMobile">
            <li *ngFor="let item of navbarOptions">
                <a
                    href="{{ item.url || '#' }}"
                    [ngClass]="{ 'pricing-btn': item.type === 'button' }"
                    (click)="onNavLinkClick($event, item)">
                    {{ item.name }}
                </a>
            </li>
        </ul>

      
<!-- Pricing Popup (Hidden by default) -->
<div class="overlay pricing-popup-overlay" *ngIf="showPricingPopup" (click)="closePricingPopup()">
    <div class="pricing-popup-container" (click)="$event.stopPropagation()">
      <h2>Pricing Details</h2>
      <p>Here is the pricing information...</p>
      <button mat-button (click)="closePricingPopup()">Close</button>
    </div>
  </div>
  

        <!-- Mobile Slider Menu -->
        <div class="mobile-slider" [class.open]="isSliderOpen">
            <ul>
                <li *ngFor="let item of navbarOptions">
                    <a href="{{ item.url || '#' }}"
                    (click)="onNavLinkClick($event, item)">
                        {{ item.name }}
                    </a>
                </li>
            </ul>
        </div>

        <!-- Mobile Icon -->
        <div class="home-icon" id="homeIcon" (click)="toggleSlider()">
            <img src="../../assets/Group 8.png" alt="Home Icon" />
        </div>

    </header>

</div>

<div class="mask-group-container">
    <img *ngIf="icon_1_url" [src]="icon_1_url" alt="Icon 1"
        class="hero_maskGroup" />
    <img *ngIf="icon_2_url" [src]="icon_2_url" alt="Icon 2"
        class="hero_maskGroup second-image" />
</div>

<section class="hero"
    style="display: flex; flex-direction: column; align-items: center; text-align: center;">
    <h1 class="hero-heading">

        <span class="gradient-text">{{ headingLine1 }}</span><br />
        <span class="gradient-text">{{ headingLine2 }}</span>

    </h1>
    <p class="hero-subheading">{{ subheading }}</p>
    <div class="hero-layout-row">
        <img *ngIf="icon_3_url" [src]="icon_3_url" alt="Icon 3"
            class="icon-left" />

        <button class="hero-cta" (click)="scrollToSection($event, '#contact')">
            <span class="hero-cta-text">{{ buttonText }}</span>
        </button>
        <img *ngIf="icon_4_url" [src]="icon_4_url" alt="Icon 4"
            class="icon-right" />
    </div>
</section>

<section class="slider">
    <button class="prev">&#10094;</button>
    <div class="slider-container">
        <ng-container *ngFor="let banner of banners let i = index">
            <video
                #videoRef
                *ngIf="banner.type === 'video'"
                [src]="baseUrl + banner.file_url"
                class="slider-video"
                controls
                loop
                playsinline
                preload="auto"
                autoplay>
            </video>
        </ng-container>

    </div>
    <button class="next">&#10095;</button>
</section>

<!-- Features Section -->
<section id="features">
    <div *ngIf="features.length > 0" class="feature-header">
        <h2>{{ features[0]?.heading }}</h2>
        <p>{{ features[0]?.subheading }}</p>
    </div>

    <div class="feature-items">
        <div *ngFor="let feature of features" class="feature-card-wrapper">
            <div class="feature-card">
                <div class="icon-circle">
                    <img *ngIf="feature.icon_url"
                        [src]="baseUrl + feature.icon_url" alt="Feature Icon" />
                </div>
            </div>
            <p class="feature-label">{{ feature.label }}</p>
        </div>
    </div>
</section>

<section id="about">
    <div class="about-container">
        <div class="about-text">
            <h2>{{ aboutPageData.heading }}</h2>
            <div class="about-text-desc" style="color: #B5B5B5;"
                [innerHTML]="aboutPageData.formattedDescription"></div>
        </div>

        <div class="about-image-wrapper" *ngIf="aboutPageData.image_url">
            <div class="about-image">
                <div class="red-bg"></div>
                <img [src]="baseUrl + aboutPageData.image_url"
                    alt="About Image" />
            </div>

            <div class="experience-box">
                <div class="experience-content">
                    <span class="experience-count">{{
                        aboutPageData.experience_count }}+</span>
                    <span class="experience-label">{{
                        aboutPageData.experience_label }}</span>
                </div>

                <div class="user-badges">
                    <div class="badge1">R</div>
                    <div class="badge2">T</div>
                    <div class="badge3">U</div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Clients Section -->
<section id="clients">
    <div class="client-text">
        <h2>{{ clientHeading }}</h2>
        <p>{{ clientSubheading }}</p>
    </div>

    <div class="client-logos-wrapper">

        <div class="client-logos row row-one">
            <img *ngFor="let logo of clientLogos" [src]="logo"
                alt="Client Logo" />
            <img *ngFor="let logo of clientLogos" [src]="logo"
                alt="Client Logo" />
        </div>

        <div class="client-logos row row-two">
            <img *ngFor="let logo of clientLogos" [src]="logo"
                alt="Client Logo" />
            <img *ngFor="let logo of clientLogos" [src]="logo"
                alt="Client Logo" />
        </div>
    </div>
</section>

<section id="process" class="process-section">
    <h2 class="section-title">How It Works</h2>

    <div class="timeline-grid">

        <!-- Row 1 -->
        <div class="timeline-row">
            <div
                *ngFor="let step of groupedProcessSteps[0]; let i = index"
                class="timeline-item"
                [attr.data-step]="i + 1">
                <div class="step-content">
                    <div class="step-icon-box">
                        <img [src]="baseUrl + step.icon_url" alt="Icon"
                            class="step-icon" />
                    </div>
                    <div class="step-text">
                        <h3>{{ step.title }}</h3>
                        <ul>
                            <li *ngFor="let point of step.points">{{
                                point.point_text }}</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Horizontal Step Numbers (desktop only) -->
        <div class="timeline-numbers">
            <ng-container *ngFor="let step of processSteps; let i = index">
                <div class="step-number-box">
                    <div class="circle-number">{{ i + 1 }}</div>
                    <div *ngIf="i < processSteps.length - 1"
                        class="step-line"></div>
                </div>
            </ng-container>
        </div>

        <!-- Row 2 -->
        <div class="timeline-row staggered">
            <div
                *ngFor="let step of groupedProcessSteps[1]; let i = index"
                class="timeline-item"
                [attr.data-step]="groupedProcessSteps[0].length + i + 1">
                <div class="step-content">
                    <div class="step-icon-box">
                        <img [src]="baseUrl + step.icon_url" alt="Icon"
                            class="step-icon" />
                    </div>
                    <div class="step-text">
                        <h3>{{ step.title }}</h3>
                        <ul>
                            <li *ngFor="let point of step.points">{{
                                point.point_text }}</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

    </div>
</section>

<section id="casestudy">
    <h2>{{ caseStudyTitle }}</h2>

    <div class="case-study-images">
        <img *ngFor="let image of caseStudyImages"
            [src]="baseUrl + image.image_url"
            alt="Case Study Image"
            class="case-study-img"
            (click)="openBlogPopup(image.id)" />

    </div>
</section>

<!-- Blog Popup -->
<div class="blog-popup" *ngIf="selectedImageData" (click)="closeBlogPopup()">
    <div class="popup-content" (click)="$event.stopPropagation()">
        <img [src]="baseUrl + selectedImageData.image_url" alt="Popup Image"
            class="popup-image" />
        <h2>{{ selectedImageData.title }}</h2>
        <h4>{{ selectedImageData.subTitle }}</h4>
        <p>{{ selectedImageData.paragraph }}</p>
        <button (click)="closeBlogPopup()" class="close-btn">Close</button>
    </div>
</div>

<!-- Contact Section -->
<section id="contact" class="contact-section">
    <div class="contact-wrapper">
        <!-- Left Side -->
        <div class="contact-content">
            <h2 class="contact-heading">{{ contactHeading }}</h2>
            <p class="contact-subheading">{{ contactSubheading }}</p>
            <img *ngIf="contactImageUrl" [src]="contactImageUrl"
                alt="Contact Image" class="contact-image" />
        </div>

        <!-- Right Side: Form -->
        <div class="contact-form-container">
            <form>
                <label for="fullName">Full Name</label>
                <input id="fullName" name="name" type="text"
                    class="contact-input" [(ngModel)]="name" />

                <label for="email">Email</label>
                <input id="email" name="email" type="email"
                    class="contact-input" [(ngModel)]="email" />

                <label for="phone">Phone Number</label>
                <input id="phone" name="phone" type="tel" class="contact-input"
                    [(ngModel)]="phone" />

                <label for="message">Requirement</label>
                <textarea id="message" name="message" class="contact-textarea"
                    [(ngModel)]="message"></textarea>

                <button type="submit" class="contact-button"
                    (click)="openDateTimePopup()">
                    <span class="contact-button-text">{{ contactButtonText
                        }}</span>
                </button>
            </form>
        </div>
    </div>
</section>

<!-- DATE & TIME POPUP -->
<div *ngIf="showDateTimePopup" (click)="closePopup()" class="overlay">
    <div class="popup" (click)="$event.stopPropagation()">
        <h2>Choose slot</h2>

        <div class="select-wrapper">
            <select [(ngModel)]="selectedMonth">
                <option *ngFor="let month of availableMonths" [ngValue]="month">
                    {{ month }}
                </option>
                <!-- You can dynamically populate this -->
            </select>
        </div>

        <div class="days-container">
            <button class="arrow left"
                (click)="scrollDays('left')">&#8249;</button>

            <div class="days-wrapper" #daysWrapper>
                <div
                    *ngFor="let d of days"
                    class="day"
                    [ngClass]="{ 'active': d.day === selectedDay, 'gray': !d.available }"
                    (click)="selectDay(d.day)">

                    <div>{{ d.weekday }}</div>
                    <div><strong>{{ d.day }}</strong></div>

                    <div class="slot-info">
                        <div class="slot-indicator"
                            [ngClass]="d.slotsClass"></div>
                        <div class="slots" [ngClass]="d.slotsClass">{{
                            d.slotsText }}</div>
                    </div>

                </div>
            </div>

            <button class="arrow right"
                (click)="scrollDays('right')">&#8250;</button>
        </div>

        <div class="popup-header">
            <span>Choose Time</span>
            <span>60 min meeting</span>
        </div>

        <div class="times">
            <div
                *ngFor="let t of availableTimes"
                class="time-slot"
                [ngClass]="{
                            'active': t === selectedTime,
                            'booked': bookedTimes.includes(t),
                            'available': !bookedTimes.includes(t)
                        }"
                (click)="!bookedTimes.includes(t) && selectTime(t)">
                {{ t }}
            </div>
        </div>

        <button class="btn" (click)="bookAppointment()"
            [disabled]="bookingLoading">
            {{ bookingLoading ? 'Booking...' : 'Book your Appointment' }}
        </button>
    </div>
</div>

<!-- Payment Confirmation Popup -->
<div *ngIf="showConfirmPaymentPopup" class="overlay"
    (click)="closeConfirmPopup()">
    <div class="confirm-popup" (click)="$event.stopPropagation()">
        <h2>Confirm Subscription</h2>
        <p>Proceed to pay {{amount}} ₹ for Day plan?</p>

        <button class="confirm-btn" (click)="proceedToPayment()">Proceed to
            Pay</button>
        <button class="cancel-btn" (click)="closeConfirmPopup()">Cancel</button>
    </div>
</div>

<div class="fullscreen-loader" *ngIf="isLoading">
    <div class="loader-content">
        <div class="spinner"></div>
        <p>Please wait...</p>
    </div>
</div>

<!-- Final Booking Status Popup -->
<div *ngIf="showFinalStatusPopup" class="overlay"
    (click)="closeFinalStatusPopup()">
    <div class="final-status-popup" (click)="$event.stopPropagation()">
        <!-- <span class="close-icon"
            (click)="closeFinalStatusPopup()">&#10006;</span> -->
        <h2>{{ bookingSuccessFlag ? 'Booking Successful!' : 'Booking Failed'
            }}</h2>
        <p>
            {{ bookingSuccessFlag
            ?
            '🎉 Your booking is confirmed! A confirmation email has been sent to you. We look forward to seeing you!'
            :
            '⚠️ Something went wrong while processing your booking. Please try again or reach out to our support team for assistance.'
            }}
        </p>
        <button class="ok-btn" (click)="closeFinalStatusPopup()">Okay</button>
    </div>
</div>

<!-- Tech Expert Page -->
<section id="tech-expert">
    <div class="tech-container" *ngIf="techMainPage">
        <h2>{{ techMainPage.main_text }}</h2>
    </div>
    <div class="tech-grid">
        <div class="tech-items">
            <div *ngFor="let tech of techList; let i = index" class="tech-item">
                <div class="techImage">
                    <img *ngIf="tech.tech_image"
                        [src]="baseUrl + tech.tech_image" alt="Tech Icon" />
                </div>
                <div class="tech-name">
                    <p class="text-sm">{{ tech.tech_name }}</p>
                </div>
            </div>
        </div>
        <img *ngIf="techMainPage.main_image_url"
            [src]="baseUrl + techMainPage.main_image_url" alt="Tech Main Image"
            class="tech-main-image" style="margin-top: -120px;" />
    </div>

</section>

<!-- Faqs page -->
<section id="faqs">
    <div class="faq-container">
        <h2 class="faq-title">{{ faqTitle }}</h2>
        <p class="faq-subheading">{{ faqSubheading }}</p>

        <div *ngFor="let item of faqs" class="faq-item">
            <h4 class="faq-question">{{ item.question }}</h4>
            <p class="faq-answer">{{ item.answer }}</p>
        </div>
    </div>

    <div class="questionAndAnswerContainer">
        <div
            class="questionAndAnswer"
            *ngFor="let item of faqsData; let i = index"
            [class.expanded]="expandedIndex === i">
            <div class="faq-header" (click)="toggleAnswer(i)">
                <h4 class="faq-question">{{ item.question }}</h4>
                <span class="arrow-icon">
                    <i
                        [ngClass]="expandedIndex === i ? 'arrow-up' : 'arrow-down'"></i>
                </span>
            </div>
            <p class="faq-answer" *ngIf="expandedIndex === i || !isMobile">{{
                item.answer }}</p>
        </div>
    </div>

</section>

<!-- Footer Section -->
<footer class="footer">
    <div class="footer-container">
        <div class="footer-left">
            <p>{{ footerContent?.about_text ||
                'Lorem Ipsum is simply dummy text of the printing and typesetting industry'
                }}</p>
            <div class="social-icons">
                <!-- Loop through the social icons array and display each icon as an image -->
                <a *ngFor="let icon of socialIcons" [href]="icon.link_url"
                    target="_blank">
                    <img [src]="baseUrl + icon.icon_url"
                        alt="{{ icon.platform_name }}" style="background-color: white; width: 32px; border-radius: 50%; padding: 3px; height: auto;" />
                </a>
            </div>
        </div>

        <div class="footer-links" style="text-align: center;">
            <h4>{{ footerContent?.legal_title || 'Legal' }}</h4>
            <ul style="list-style: none; padding: 0;">
                <li>
                    <strong (click)="openLegalPopup('privacy')">Privacy and
                        Policy</strong><br />
                </li>
                <li>
                    <strong (click)="openLegalPopup('terms')">Terms &
                        Conditions</strong><br />
                </li>
            </ul>
        </div>

        <!-- Popup Modal -->
        <div
            *ngIf="showLegalPopup"
            class="overlay legal-popup-overlay"
            (click)="closeLegalPopup()">
            <div
                class="final-status-popup legal-popup"
                (click)="$event.stopPropagation()">
                <h2>
                    {{ legalPopupType === 'privacy' ? 'Privacy and Policy' :
                    'Terms & Conditions' }}
                </h2>
                <p>
                    {{
                    legalPopupType === 'privacy'
                    ? footerContent?.privacy_policy_text
                    : footerContent?.terms_conditions_text
                    }}
                </p>

                <button class="ok-btn" (click)="closeLegalPopup()">Okay</button>
            </div>
        </div>

        <div class="footer-contact">
            <h4>{{ footerContent?.contact_title || 'Contact' }}</h4>
            <ul>
                <li><i class="fas fa-map-marker-alt"></i> {{
                    footerContent?.contact_address ||
                    'Lorem Ipsum is simply dummy text of the printing and typesetting industry'
                    }}</li>
                <li><i class="fas fa-phone-alt"></i> {{
                    footerContent?.contact_phone || '+91 8724982483' }}</li>
                <li><i class="fas fa-envelope"></i> {{
                    footerContent?.contact_email || 'email@email.com' }}</li>
            </ul>
        </div>
    </div>
    <div class="footer-bottom">
        Copyright Reserved 2024
    </div>
</footer>
